{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "db6d9f82_426be490",
        "filename": "bmc_pos_mgr.cpp",
        "patchSetId": 4
      },
      "lineNbr": 68,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2025-11-07T14:29:51Z",
      "side": 1,
      "message": "Do we have any deadlocks here where phosphor-inventory-manager can\u0027t create logs because we\u0027ll end up calling back into phosphor-inventory-manager, which isn\u0027t listening because it is waiting for the log to be recorded?\n\n(or similar with entity-manager, mapper, etc.)",
      "range": {
        "startLine": 64,
        "startChar": 0,
        "endLine": 68,
        "endChar": 78
      },
      "revId": "77714a6eddc5c52308856d166ef39061e2e9117a",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5e76b7dd_56b654f5",
        "filename": "bmc_pos_mgr.cpp",
        "patchSetId": 4
      },
      "lineNbr": 68,
      "author": {
        "id": 1000008
      },
      "writtenOn": "2025-11-10T17:11:39Z",
      "side": 1,
      "message": "I don\u0027t see PIM ever creating logs.\nEM though will probably start using lg2 to commit those \u0027inventory added\u0027 logs.\n\nI\u0027m not sure how likely it is that EM would host this Position interface on this object path, but if it did and somehow got far enough along before phosphor-logging started, then I could see this issue:\n1. EM makes lg2::commit call to create \u0027inventory added\u0027 log\n2. D-Bus activation starts phosphor-logging\n3. on startup, phosphor-logging tries to read the BMC position from EM\n4. Deadlock?  Or does the async call that EM uses prevent that?\n\nAny ideas? How bad would it be if we just stored the position in a file as well?  That would simplify this code quite a lot.",
      "parentUuid": "db6d9f82_426be490",
      "range": {
        "startLine": 64,
        "startChar": 0,
        "endLine": 68,
        "endChar": 78
      },
      "revId": "77714a6eddc5c52308856d166ef39061e2e9117a",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "72136d93_c4860f8b",
        "filename": "bmc_pos_mgr.cpp",
        "patchSetId": 4
      },
      "lineNbr": 68,
      "author": {
        "id": 1000008
      },
      "writtenOn": "2025-11-11T21:36:10Z",
      "side": 1,
      "message": "Going to resolve this because EM would be my only worry and it would be using async or asio.",
      "parentUuid": "5e76b7dd_56b654f5",
      "range": {
        "startLine": 64,
        "startChar": 0,
        "endLine": 68,
        "endChar": 78
      },
      "revId": "77714a6eddc5c52308856d166ef39061e2e9117a",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "64fd7157_89e20fbd",
        "filename": "bmc_pos_mgr.cpp",
        "patchSetId": 4
      },
      "lineNbr": 68,
      "author": {
        "id": 1000008
      },
      "writtenOn": "2025-11-11T22:07:45Z",
      "side": 1,
      "message": "Since EM would after all be using the sync version of commit, I think a deadlock would be possible. I\u0027ll explore getting the position into a file in /run/openbmc/",
      "parentUuid": "72136d93_c4860f8b",
      "range": {
        "startLine": 64,
        "startChar": 0,
        "endLine": 68,
        "endChar": 78
      },
      "revId": "77714a6eddc5c52308856d166ef39061e2e9117a",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2cf2205d_7455fee7",
        "filename": "log_manager.cpp",
        "patchSetId": 4
      },
      "lineNbr": 232,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2025-11-07T14:29:51Z",
      "side": 1,
      "message": "Why put this logic here?  Can\u0027t it be handled in the bmcPosMgr?",
      "range": {
        "startLine": 228,
        "startChar": 0,
        "endLine": 232,
        "endChar": 9
      },
      "revId": "77714a6eddc5c52308856d166ef39061e2e9117a",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e7926bc7_2eba44dd",
        "filename": "log_manager.cpp",
        "patchSetId": 4
      },
      "lineNbr": 232,
      "author": {
        "id": 1000008
      },
      "writtenOn": "2025-11-10T17:11:39Z",
      "side": 1,
      "message": "Yes, should be possible, will fix.",
      "parentUuid": "2cf2205d_7455fee7",
      "range": {
        "startLine": 228,
        "startChar": 0,
        "endLine": 232,
        "endChar": 9
      },
      "revId": "77714a6eddc5c52308856d166ef39061e2e9117a",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "813674bf_97e93524",
        "filename": "log_manager.cpp",
        "patchSetId": 4
      },
      "lineNbr": 232,
      "author": {
        "id": 1000008
      },
      "writtenOn": "2025-11-11T21:36:10Z",
      "side": 1,
      "message": "With the other commits also adding function into this leg: https://gerrit.openbmc.org/c/openbmc/phosphor-logging/+/84858/4/log_manager.cpp#228  it makes it harder to push things into the BmcPosMgr since this class will be doing things.\n\nSo I will resolve this but am open to any better solutions.",
      "parentUuid": "e7926bc7_2eba44dd",
      "range": {
        "startLine": 228,
        "startChar": 0,
        "endLine": 232,
        "endChar": 9
      },
      "revId": "77714a6eddc5c52308856d166ef39061e2e9117a",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}