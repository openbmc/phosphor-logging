{
  "comments": [
    {
      "key": {
        "uuid": "997aea41_ad942423",
        "filename": "docs/structured-logging.md",
        "patchSetId": 4
      },
      "lineNbr": 71,
      "author": {
        "id": 1000004
      },
      "writtenOn": "2021-08-20T15:45:41Z",
      "side": 1,
      "message": "Hmm, this example still doesn\u0027t seem to show the full power of what I think we can do now?\nlg2::level(\"Error talking to {TAG0}, error code is {TAG1}\", \"TAG0\", \"value\"_s, \"TAG1\", lg2::hex, 2);",
      "revId": "6d822098fc61dec175915e6f72ca605035c999a5",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f4d00814_54c06aff",
        "filename": "docs/structured-logging.md",
        "patchSetId": 4
      },
      "lineNbr": 71,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2021-08-20T16:38:41Z",
      "side": 1,
      "message": "True.  I can do a minor update here before this is merged to put {TAG0} somewhere other than at the end.  I purposefully didn\u0027t want to put TAG1 in the message to show that you can have some in and some out.",
      "parentUuid": "997aea41_ad942423",
      "revId": "6d822098fc61dec175915e6f72ca605035c999a5",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "07118fa8_150024f9",
        "filename": "docs/structured-logging.md",
        "patchSetId": 4
      },
      "lineNbr": 71,
      "author": {
        "id": 1000004
      },
      "writtenOn": "2021-08-20T18:24:05Z",
      "side": 1,
      "message": "ok makes sense showing both, if any other comments come in, please update, otherwise I\u0027m fine.",
      "parentUuid": "f4d00814_54c06aff",
      "revId": "6d822098fc61dec175915e6f72ca605035c999a5",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ae01304d_71e3fbf4",
        "filename": "docs/structured-logging.md",
        "patchSetId": 4
      },
      "lineNbr": 202,
      "author": {
        "id": 1000188
      },
      "writtenOn": "2021-08-09T08:10:57Z",
      "side": 1,
      "message": "This doesn\u0027t really explain why it\u0027s not used for structuring the entries though. I think it would be much simpler and give us more formatting flexibility to use an existing formatter like fmtlib / std::format instead of inventing our own syntax that is vaguely likey a limited iostream. It seems like it would be perfectly acceptable to have format strings per entry() and then have the upper layer that allows emplacing their values in the format string.",
      "revId": "6d822098fc61dec175915e6f72ca605035c999a5",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a792304b_130910e8",
        "filename": "docs/structured-logging.md",
        "patchSetId": 4
      },
      "lineNbr": 202,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2021-08-10T01:31:24Z",
      "side": 1,
      "message": "\u003e This doesn\u0027t really explain why it\u0027s not used for structuring the entries though.\n\nCorrect.  I addressed that in the following Qs, didn\u0027t I?\n\n\u003e It seems like it would be perfectly acceptable to have format strings per entry() and then have the upper layer that allows emplacing their values in the format string.\n\nMaybe.  I think I covered this by the paragraph in line 222 and 253.\n\nI think there is a fundamental disagreement with you on the ergonomics of the \u0027entry\u0027 syntax from before.  I\u0027ve heard from many people that they absolutely hated how verbose it was and some of them said that it was one of the primary reasons they avoided using phosphor-logging.  I don\u0027t know how to reconcile all the view-points here.",
      "parentUuid": "ae01304d_71e3fbf4",
      "revId": "6d822098fc61dec175915e6f72ca605035c999a5",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "25002cbd_e7589972",
        "filename": "docs/structured-logging.md",
        "patchSetId": 4
      },
      "lineNbr": 223,
      "author": {
        "id": 1000188
      },
      "writtenOn": "2021-08-09T08:10:57Z",
      "side": 1,
      "message": "It would actually be really nice to have these things, sometimes you want specific formatting for numeric output.",
      "revId": "6d822098fc61dec175915e6f72ca605035c999a5",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8ee72f45_9e1bb0bf",
        "filename": "docs/structured-logging.md",
        "patchSetId": 4
      },
      "lineNbr": 223,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2021-08-10T01:31:24Z",
      "side": 1,
      "message": "My argument is that it would be \"nice\" but unnecessary.  Can you point to cases where it is really important for our structured data to have fine-grained numerical formatting?",
      "parentUuid": "25002cbd_e7589972",
      "revId": "6d822098fc61dec175915e6f72ca605035c999a5",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "11fd8f65_67631876",
        "filename": "docs/structured-logging.md",
        "patchSetId": 4
      },
      "lineNbr": 223,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2021-08-10T10:18:27Z",
      "side": 1,
      "message": "Also, I don\u0027t think there is anything that would preclude you from using `{fmt}` in the structured entry data itself, without me explicitly adding support for it.  Instead of `lg2::hex, 0x1` you could do `fmt::format(\"{:#x}\", 0x1)` if you prefer the utility of that, right?  I added the hex/bin formatting because I believe they cover the vast majority of the desired formatting cases.\n\nA rudimentary attempted grep/sed/sort/uniq to find all the \"entry\" formats used today yields only ones that are covered by the formatting I added:\n\n%#02x\n0x%02x\n0x%02X\n0x%04x\n0x%04X\n0x%08X\n0x%0X\n0x%hx\n0x%s\n0x%x\n0x%X\n %d\n%d\n%d_0x%x\n%d\\n\n%f\nFILE_NAME: %s\"\n%i\n%ld\n%llu\n%lu\n%lu\\n\nPERCENT:%d\"\n% PRIu32\n%PRIu64\n% PRIu8\nRETURN_CODE:%d\"\n %s\n%s\n%s\\n\n%s_%x\n%u\n%uz\n%x\n%x:%x\n%zu\n\nConversely, I looked through all the fmt calls and saw the vast majority of them are simple position indicators.  The only ones with format specifiers are:\n\n{:02X}\n{:#x}\n{:02x}\n{:04X}\n{:04x}\n\nThe code-base seems to back up my statement here: \"less consistent structured data with essentially no additional benefits.\"  Because, if there were a benefit to more detailed formatting, someone would have attempted to use it, right?",
      "parentUuid": "8ee72f45_9e1bb0bf",
      "revId": "6d822098fc61dec175915e6f72ca605035c999a5",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4455eb73_2a28f871",
        "filename": "docs/structured-logging.md",
        "patchSetId": 4
      },
      "lineNbr": 239,
      "author": {
        "id": 1000188
      },
      "writtenOn": "2021-08-09T08:10:57Z",
      "side": 1,
      "message": "This doesn\u0027t really seem true, you could use a single buffer for all of the entry()\u0027s and the overhead is mostly based on the number of entires which is similar to the proposal. fmtlib provides compile time formatting checks that you could use.",
      "revId": "6d822098fc61dec175915e6f72ca605035c999a5",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6b2191fc_799ce6d1",
        "filename": "docs/structured-logging.md",
        "patchSetId": 4
      },
      "lineNbr": 239,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2021-08-10T01:31:24Z",
      "side": 1,
      "message": "This seems like you are suggesting that we only format the unstructured message portion and not the journal metadata.  Maybe I understand you wrong.\n\nIf we want to format the journal metadata it would require N calls to `{fmt}` somewhere.  Can you point out which parts of the paragraph don\u0027t seem accurate.",
      "parentUuid": "4455eb73_2a28f871",
      "revId": "6d822098fc61dec175915e6f72ca605035c999a5",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    }
  ]
}