## Introduction
Document describes steps to be followed for application specific non dbus
errors.

### Write app specific error yaml files
1. Write error yamls for your application and place them in your application
   repository.

### Makefile rules to run sdbus++ on error yaml files
Modify the Makefile.am as shown bellow for generation of error.cpp and erorr.hpp
```
org/open_power/Host/error.hpp: ${top_srcdir}/org/open_power/Host.errors.yaml
    @mkdir -p `dirname $@`
    $(SDBUSPLUSPLUS) -r $(srcdir) error exception-header org.open_power.Host > $@
```
```
org/open_power/Host/error.cpp: ${top_srcdir}/org/open_power/Host.errors.yaml
    @mkdir -p `dirname $@`
    $(SDBUSPLUSPLUS) -r $(srcdir) error exception-cpp org.open_power.Host > $@
```
### Write native recipe to copy error yaml files
Refer to ** openpower-debug-collector-error-native.bb** captured below
```
SUMMARY = "Copy error yaml files to known path for elog parsing"

PR = "r1"

inherit native
inherit obmc-phosphor-license
inherit openpower-dbus-interfaces

PROVIDES += "openpower-debug-collector-error-native"
require openpower-debug-collector.inc

S = "${WORKDIR}/git"

do_install_append() {
    SRC=${S}/org/open_power
    DEST=${op_error_yaml_dir}/org/open_power
    install -d ${DEST}
    install ${SRC}/Host.errors.yaml ${DEST}
}
```
### Establish dependency with phosphor-logging
Establish debendency with phosphor-logging to ensure that error yaml files are
copied to a known location before phosphor logging parses the error yaml files
Refer to **phosphor-logging-error-logs-native.bbappend**
```
DEPENDS += "openpower-debug-collector-error-native"
```
### Reporting error
To report (commit) the error follow the below format
**report<stdbusexception>(metadata)**
1. sdbus exception is generated by runnning stdbus++ on the error yaml files
2. phosphor-logging runs elog-gen parser on the error yaml files to generate the
   medatada.

#### For example
```
#include <xyz/openbmc_project/Software/Version/error.hpp>
#include <phosphor-logging/elog-errors.hpp>

using error =
 sdbusplus::xyz::openbmc_project::Software::Version::Error::ManifestFileFailure;
using metadata =
phosphor::logging::xyz::openbmc_project::Software::Version::ManifestFileFailure;
report<error>(metadata::PATH(tarFilePath.c_str())););
```
